{% extends "base.html" %} 

{% block main_content %}
<div class="user">
<h1>{{user.display_name}}</h1>
<button type="button" class = "button" onclick="window.location.href= 
    '{{ url_for('editUsername', uid = user.user_id) }}';">Edit User
</button>
<br>
</div>

<div class="tab">
    <button class="tablinks" onclick="displayTab(event, 'Friends')" 
        id = "default">Friends</button>
    <button class="tablinks" onclick="displayTab(event, 'Playlists')">
        Playlists</button>
</div>

<div id="Friends" class="tabcontent">
<ol>
    {% if friendsList|length %}
        {% for friend in friendsList %}
            <li>
                <a href= "{{ url_for('user', uid = friend.user_id) }}">
                    {{friend.display_name}}</a>
            </li>
        {% endfor %}
    {% else %}
        <p>{{user.display_name}} is not following anyone</p>
    {% endif %}
</ol>

</div>

<div id="Playlists" class="tabcontent">

<ol>
    {% if playlists|length %}
        {% for playlist in playlists %}
            <li>
                <a href= "{{ url_for('playlistPage', 
                    pid = playlist.playlist_id) }}">
                    {{playlist.playlist_name}}</a>
            </li>
        {% endfor %}
    {% else %}
        <p>{{user.display_name}} has no available playlists</p>
    {% endif %}

</ol> 
    <br>
    <button type="button" class="button" onclick="window.location.href= 
        '{{ url_for('createPlaylist') }}';">Create New Playlist</button>
</div>
<script>
    function displayTab(evt, tab) {
        var tabcontent;
        var tablinks;
        var index;
        tabcontent = document.getElementsByClassName("tabcontent");
        tablinks = document.getElementsByClassName("tablinks");
        for (index = 0; index < tabcontent.length; index++) {
            tabcontent[index].style.display = "none";
        }
        for (index = 0; index < tablinks.length; index++) {
            tablinks[index].className = 
                tablinks[index].className.replace(" active", "");
        }
        document.getElementById(tab).style.display = "block";
        evt.currentTarget.className += " active";       
    }

    document.getElementById("default").click();
</script>
{% endblock %}